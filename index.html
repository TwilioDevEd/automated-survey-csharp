<!DOCTYPE html><html><head><title>Automated Surveys with ASP.NET MVC</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Automated Surveys with ASP.NET MVC"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Automated Surveys with ASP.NET MVC</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn how to leverage the Twilio API and TwiML to conduct automated phone surveys.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Automated surveys with Twilio and ASP.NET MVC" class="chapter"><div data-file="AutomatedSurvey.Web/Models/Survey.cs" class="step"><h2 id="about-this-application">About this application</h2>
<p>This <a href="http://www.asp.net/mvc">ASP.NET MVC</a> sample application demonstrates
using Twilio and <a href="https://www.twilio.com/docs/api/twiml">TwiML</a> to deliver 
a survey that can be completed via voice call.</p>
<p>In this tutorial, we&#39;ll highlight the code necessary to power a automated 
survey. To run this sample app yourself,
<a href="https://github.com/TwilioDevEd/automated-survey-csharp">download the code and follow the instructions on
GitHub</a>.</p>
<p>Let&#39;s get started! Click the right arrow above to move to the next step
of the tutorial.</p>
<hr>
<p><strong>See Also</strong></p>
<ul>
<li><a href="http://www.asp.net/mvc">ASP.NET MVC</a></li>
<li><a href="https://msdn.microsoft.com/en-us/data/jj591621.aspx">Code First Migrations</a></li>
<li><a href="https://www.visualstudio.com/">Visual Studio</a></li>
<li><a href="Your Response https://www.twilio.com/docs/api/twiml">TwiML™: The Twilio Markup Language</a></li>
<li><a href="https://www.nuget.org/packages/Twilio.TwiML/">Twilio.TwiML</a></li>
<li><a href="https://www.nuget.org/packages/Twilio.Mvc/">Twilio.Mvc</a></li>
</ul>
</div><div class="step"><h2 id="configure-twilio-number">Configure Twilio Number</h2>
<p>In order to receive incoming calls we need to first configure our <a href="https://www.twilio.com/user/account/phone-numbers/incoming">Twilio phone number</a>.
<img src="https://raw.github.com/TwilioDevEd/automated-survey-csharp/master/configure-twilio-phone.png" alt="Configure Twilio Phone"></p>
<p>Click on the red number, and then set the Voice Request URL. Don’t forget to save the changes.
<img src="https://raw.github.com/TwilioDevEd/automated-survey-csharp/master/set-voice-request-url.png" alt="Set Voice Request URL"></p>
</div><div data-file="AutomatedSurvey.Web/Migrations/Configuration.cs" data-highlight="13-49" class="step"><h2 id="create-a-survey">Create a Survey</h2>
<p>The questions are created using the <code>Configuration.Seed</code> method.
The advantage of this approach is that the data is populated when you run <code>Update-Database</code>.</p>
<hr>
<p><strong>See Also</strong></p>
<ul>
<li><a href="http://www.asp.net/web-api/overview/data/using-web-api-with-entity-framework/part-3">Use Code First Migrations to Seed the Database</a></li>
</ul>
</div><div data-file="AutomatedSurvey.Web/Controllers/SurveysController.cs" data-highlight="24-36" class="step"><h2 id="respond-to-twilio-s-initial-request">Respond to Twilio’s initial request</h2>
<p>Whenever one of your <a href="https://www.twilio.com/user/account/phone-numbers/incoming">Twilio phone numbers</a> 
receives a call, Twillo will make an HTTP request to the voice request URL 
configured under it with the HTTP method specified (either GET or POST).</p>
<p>For this application Twilio should be configured to make a GET request to 
the application’s <code>surveys/connectcall</code> endpoint. Here the application will 
find the last created survey, use <a href="https://www.twilio.com/docs/api/twiml/say"><code>&lt;Say&gt;</code></a> 
to speak  welcome message, and <a href="https://www.twilio.com/docs/api/twiml/redirect"><code>&lt;Redirect&gt;</code></a> 
to the first question in the survey.</p>
<hr>
<p><strong>See Also</strong></p>
<ul>
<li><a href="https://www.twilio.com/platform/webhooks">Twilio webhooks</a></li>
<li><a href="Your Response https://www.twilio.com/docs/api/twiml/your_response">Twilio Voice</a></li>
<li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">HTTP Methods</a></li>
</ul>
</div><div data-file="AutomatedSurvey.Web/Domain/Response.cs" data-highlight="29-41" class="step"><h2 id="ask-the-caller-a-question">Ask the caller a question</h2>
<p>At this point, Twilio has made a request for the first question. 
We’re using the <a href="https://github.com/twilio/twilio-csharp">twilio-csharp</a> 
library to generate a TwiML response.</p>
<p>After using <a href="https://www.twilio.com/docs/api/twiml/say"><code>&lt;Say&gt;</code></a> to ask 
the user a question, we use either <a href="https://www.twilio.com/docs/api/twiml/gather"><code>&lt;Gather&gt;</code></a> 
or <a href="https://www.twilio.com/docs/api/twiml/record"><code>&lt;Record&gt;</code></a> to collect
an answer, depending on what type of question is being asked.</p>
<hr>
<p><strong>See Also</strong></p>
<ul>
<li><a href="https://www.nuget.org/packages/Twilio.TwiML/">Twilio.TwiML</a></li>
<li><a href="https://www.nuget.org/packages/Twilio.Mvc/">Twilio.Mvc</a></li>
</ul>
</div><div data-file="AutomatedSurvey.Web/Domain/Response.cs" data-highlight="43-56" class="step"><h2 id="ask-different-types-of-questions">Ask different types of questions</h2>
<p>If we want a number or boolean response from the user, we use the 
<a href="https://www.twilio.com/docs/api/twiml/gather"><code>&lt;Gather&gt;</code></a> verb.
For a free text response, we use <a href="https://www.twilio.com/docs/api/twiml/record"><code>&lt;Record&gt;</code></a> 
to collect an answer.</p>
<p>Both TwiML tags have an <code>action</code> attribute and a <code>method</code> attribute. Twilio 
will use both attributes to make another HTTP request to our application 
with the user&#39;s answer.</p>
<p>Since we want to create a new resource on the server, we’ll use the <code>POST</code> 
method. The <code>action</code> url will be <code>answers/create</code>.</p>
<hr>
<p><strong>See Also</strong></p>
<ul>
<li><a href="https://www.nuget.org/packages/Twilio.TwiML/">Twilio.TwiML</a></li>
<li><a href="https://www.nuget.org/packages/Twilio.Mvc/">Twilio.Mvc</a></li>
</ul>
</div><div data-file="AutomatedSurvey.Web/Controllers/AnswersController.cs" data-highlight="29-38" class="step"><h2 id="record-the-caller-s-response">Record the caller’s response</h2>
<p>When the caller has finished entering her response, Twilio will make a request to
this controller including all the <a href="https://www.twilio.com/docs/api/twiml/twilio_request">call parameters</a> 
we will need. For this sample application we will store either the
<code>RecordingUrl</code> for free-answer responses, or parse <code>Digits</code> for number or
boolean responses. We&#39;ll also track the <code>CallSid</code> so we can track answers
for a specific survey response.</p>
<p>Most surveys include more than a single question so we must now
redirect the user to the next question in this survey. This process will 
repeat until we are done collecting results of the survey.</p>
</div><div data-file="AutomatedSurvey.Web/Controllers/SurveysController.cs" data-highlight="38-49" class="step"><h2 id="display-the-survey-results">Display the survey results</h2>
<p>For this route we simply query the database and display the information 
using a <a href="http://www.asp.net/web-pages/overview/getting-started/">Razor template</a>.</p>
<p>You can access this page in the application at <code>/surveys/results</code>.</p>
</div><div class="step"><h2 id="what-s-next-">What’s next?</h2>
<p>As you saw, build an application using Twilio numbers was a very 
straightforward. We hope you find this sample application useful. 
If you’re a C# developer working with Twilio, you might enjoy these other 
tutorials.</p>
<ul>
<li><a href="https://www.twilio.com/docs/howto/walkthrough/two-factor-authentication/csharp/mvc">Two-Factor Authentication with Authy</a></li>
<li><a href="https://www.twilio.com/docs/howto/walkthrough/appointment-reminders/csharp/mvc">Appointment Reminders</a></li>
</ul>
<h4 id="did-this-help-">Did this help?</h4>
<p>If you have any feedback to share with us, we&#39;d love to hear it. 
Tweet <a href="https://twitter.com/twilio">@twilio</a> to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="AutomatedSurvey.Web/Models/Survey.cs" data-mode="csharp">77u/dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgU3lzdGVtLkNvbXBvbmVudE1vZGVsLkRhdGFBbm5vdGF0aW9uczsKdXNpbmcgU3lzdGVtLkxpbnE7CnVzaW5nIFN5c3RlbS5XZWI7CgpuYW1lc3BhY2UgQXV0b21hdGVkU3VydmV5LldlYi5Nb2RlbHMKewogICAgcHVibGljIGNsYXNzIFN1cnZleQogICAgewogICAgICAgIHB1YmxpYyBpbnQgSWQgeyBnZXQ7IHNldDsgfQogICAgICAgIFtSZXF1aXJlZF0KICAgICAgICBwdWJsaWMgc3RyaW5nIFRpdGxlIHsgZ2V0OyBzZXQ7IH0KICAgICAgICBbVGltZXN0YW1wXQogICAgICAgIHB1YmxpYyBieXRlW10gVGltZXN0YW1wIHsgZ2V0OyBzZXQ7IH0KICAgICAgICBwdWJsaWMgdmlydHVhbCBJTGlzdDxRdWVzdGlvbj4gUXVlc3Rpb25zIHsgZ2V0OyBzZXQ7IH0KICAgIH0KfQ==</textarea>
<textarea class="saurus-file" data-file="AutomatedSurvey.Web/Migrations/Configuration.cs" data-mode="csharp">dXNpbmcgU3lzdGVtLkRhdGEuRW50aXR5Lk1pZ3JhdGlvbnM7CnVzaW5nIEF1dG9tYXRlZFN1cnZleS5XZWIuTW9kZWxzOwoKbmFtZXNwYWNlIEF1dG9tYXRlZFN1cnZleS5XZWIuTWlncmF0aW9ucwp7CiAgICBpbnRlcm5hbCBzZWFsZWQgY2xhc3MgQ29uZmlndXJhdGlvbiA6IERiTWlncmF0aW9uc0NvbmZpZ3VyYXRpb248QXV0b21hdGVkU3VydmV5c0NvbnRleHQ+CiAgICB7CiAgICAgICAgcHVibGljIENvbmZpZ3VyYXRpb24oKQogICAgICAgIHsKICAgICAgICAgICAgQXV0b21hdGljTWlncmF0aW9uc0VuYWJsZWQgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIFNlZWQoQXV0b21hdGVkU3VydmV5c0NvbnRleHQgY29udGV4dCkKICAgICAgICB7CiAgICAgICAgICAgIGNvbnRleHQuU3VydmV5cy5BZGRPclVwZGF0ZSgKICAgICAgICAgICAgICAgIHN1cnZleSA9PiBuZXcgeyBzdXJ2ZXkuSWQsIHN1cnZleS5UaXRsZSB9LAogICAgICAgICAgICAgICAgbmV3IFN1cnZleSB7IElkID0gMSwgVGl0bGUgPSAiVHdpbGlvIiB9KTsKCiAgICAgICAgICAgIGNvbnRleHQuU2F2ZUNoYW5nZXMoKTsKCiAgICAgICAgICAgIGNvbnRleHQuUXVlc3Rpb25zLkFkZE9yVXBkYXRlKAogICAgICAgICAgICAgICAgcXVlc3Rpb24gPT4gbmV3IHsgcXVlc3Rpb24uQm9keSwgcXVlc3Rpb24uVHlwZSwgcXVlc3Rpb24uU3VydmV5SWQgfSwKICAgICAgICAgICAgICAgIG5ldyBRdWVzdGlvbgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEJvZHkgPSAiSGVsbG8uIFRoYW5rcyBmb3IgdGFraW5nIHRoZSBUd2lsaW8gRGV2ZWxvcGVyIEVkdWNhdGlvbiBzdXJ2ZXkuIE9uIGEgc2NhbGUgb2YgMCB0byA5IGhvdyB3b3VsZCB5b3UgcmF0ZSB0aGlzIHR1dG9yaWFsPyIsCiAgICAgICAgICAgICAgICAgICAgVHlwZSA9IFF1ZXN0aW9uVHlwZS5OdW1lcmljLAogICAgICAgICAgICAgICAgICAgIFN1cnZleUlkID0gMQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG5ldyBRdWVzdGlvbgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEJvZHkgPSAiT24gYSBzY2FsZSBvZiAwIHRvIDkgaG93IHdvdWxkIHlvdSByYXRlIHRoZSBkZXNpZ24gb2YgdGhpcyB0dXRvcmlhbD8iLAogICAgICAgICAgICAgICAgICAgIFR5cGUgPSBRdWVzdGlvblR5cGUuTnVtZXJpYywKICAgICAgICAgICAgICAgICAgICBTdXJ2ZXlJZCA9IDEKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBuZXcgUXVlc3Rpb24KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBCb2R5ID0gIkluIHlvdXIgb3duIHdvcmRzIHBsZWFzZSBkZXNjcmliZSB5b3VyIGZlZWxpbmdzIGFib3V0IFR3aWxpbyByaWdodCBub3c/IFByZXNzIHRoZSBwb3VuZCBzaWduIHdoZW4geW91IGFyZSBmaW5pc2hlZC4iLAogICAgICAgICAgICAgICAgICAgIFR5cGUgPSBRdWVzdGlvblR5cGUuVm9pY2UsCiAgICAgICAgICAgICAgICAgICAgU3VydmV5SWQgPSAxCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbmV3IFF1ZXN0aW9uCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgQm9keSA9ICJEbyB5b3UgbGlrZSBteSB2b2ljZT8gUGxlYXNlIGJlIGhvbmVzdCwgSSBkaXNsaWtlIGxpYXJzLiIsCiAgICAgICAgICAgICAgICAgICAgVHlwZSA9IFF1ZXN0aW9uVHlwZS5ZZXNObywKICAgICAgICAgICAgICAgICAgICBTdXJ2ZXlJZCA9IDEKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29udGV4dC5TYXZlQ2hhbmdlcygpOwogICAgICAgIH0KICAgIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="AutomatedSurvey.Web/Controllers/SurveysController.cs" data-mode="csharp">77u/dXNpbmcgU3lzdGVtLkxpbnE7CnVzaW5nIFN5c3RlbS5XZWIuTXZjOwp1c2luZyBBdXRvbWF0ZWRTdXJ2ZXkuV2ViLk1vZGVsczsKdXNpbmcgQXV0b21hdGVkU3VydmV5LldlYi5Nb2RlbHMuUmVwb3NpdG9yeTsKdXNpbmcgVHdpbGlvLlR3aU1MOwp1c2luZyBUd2lsaW8uVHdpTUwuTXZjOwoKbmFtZXNwYWNlIEF1dG9tYXRlZFN1cnZleS5XZWIuQ29udHJvbGxlcnMKewogICAgcHVibGljIGNsYXNzIFN1cnZleXNDb250cm9sbGVyIDogVHdpbGlvQ29udHJvbGxlcgogICAgewogICAgICAgIHByaXZhdGUgcmVhZG9ubHkgSVJlcG9zaXRvcnk8U3VydmV5PiBfc3VydmV5c1JlcG9zaXRvcnk7CiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBJUmVwb3NpdG9yeTxBbnN3ZXI+IF9hbnN3ZXJzUmVwb3NpdG9yeTsKCiAgICAgICAgcHVibGljIFN1cnZleXNDb250cm9sbGVyKCkgOiB0aGlzKG5ldyBTdXJ2ZXlzUmVzcG9zaXRvcnkoKSwgbmV3IEFuc3dlcnNSZXBvc2l0b3J5KCkpIHsgfQoKICAgICAgICBwdWJsaWMgU3VydmV5c0NvbnRyb2xsZXIoCiAgICAgICAgICAgIElSZXBvc2l0b3J5PFN1cnZleT4gc3VydmV5c1JlcG9zaXRvcnksIElSZXBvc2l0b3J5PEFuc3dlcj4gYW5zd2Vyc1JlcG9zaXRvcnkpCiAgICAgICAgewogICAgICAgICAgICBfc3VydmV5c1JlcG9zaXRvcnkgPSBzdXJ2ZXlzUmVwb3NpdG9yeTsKICAgICAgICAgICAgX2Fuc3dlcnNSZXBvc2l0b3J5ID0gYW5zd2Vyc1JlcG9zaXRvcnk7CiAgICAgICAgfQoKICAgICAgICAvLyBXZWJob29rIGZvciBUd2lsaW8gc3VydmV5IG51bWJlcgogICAgICAgIC8vIEdFVDogY29ubmVjdGNhbGwKICAgICAgICBwdWJsaWMgQWN0aW9uUmVzdWx0IENvbm5lY3RDYWxsKCkKICAgICAgICB7CiAgICAgICAgICAgIHZhciByZXNwb25zZSA9IG5ldyBUd2lsaW9SZXNwb25zZSgpOwogICAgICAgICAgICB2YXIgc3VydmV5ID0gX3N1cnZleXNSZXBvc2l0b3J5LkZpcnN0T3JEZWZhdWx0KCk7CiAgICAgICAgICAgIHZhciB3ZWxjb21lTWVzc2FnZSA9IHN0cmluZy5Gb3JtYXQoIlRoYW5rIHlvdSBmb3IgdGFraW5nIHRoZSB7MH0gc3VydmV5Iiwgc3VydmV5LlRpdGxlKTsKCiAgICAgICAgICAgIHJlc3BvbnNlLlNheSh3ZWxjb21lTWVzc2FnZSk7CiAgICAgICAgICAgIHJlc3BvbnNlLlJlZGlyZWN0KFVybC5BY3Rpb24oImZpbmQiLCAicXVlc3Rpb25zIiwgbmV3IHsgaWQgPSAxIH0pKTsKCiAgICAgICAgICAgIHJldHVybiBUd2lNTChyZXNwb25zZSk7CiAgICAgICAgfQoKICAgICAgICAvLyBHRVQ6IHN1cnZleXMvcmVzdWx0cwogICAgICAgIHB1YmxpYyBBY3Rpb25SZXN1bHQgUmVzdWx0cygpCiAgICAgICAgewogICAgICAgICAgICB2YXIgYW5zd2VycyA9IF9hbnN3ZXJzUmVwb3NpdG9yeS5BbGwoKTsKICAgICAgICAgICAgdmFyIHVuaXF1ZUFuc3dlcnMgPSBhbnN3ZXJzCiAgICAgICAgICAgICAgICAuU2VsZWN0KGFuc3dlciA9PiBhbnN3ZXIuQ2FsbFNpZCkKICAgICAgICAgICAgICAgIC5EaXN0aW5jdCgpLlRvTGlzdCgpOwoKICAgICAgICAgICAgVmlld0JhZy5VbmlxdWVBbnN3ZXJzID0gdW5pcXVlQW5zd2VyczsKICAgICAgICAgICAgVmlld0JhZy5TdXJ2ZXlUaXRsZSA9IF9zdXJ2ZXlzUmVwb3NpdG9yeS5GaXJzdE9yRGVmYXVsdCgpLlRpdGxlOwogICAgICAgICAgICByZXR1cm4gVmlldyhhbnN3ZXJzKTsKICAgICAgICB9CiAgICB9Cn0=</textarea>
<textarea class="saurus-file" data-file="AutomatedSurvey.Web/Domain/Response.cs" data-mode="csharp">77u/dXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIEF1dG9tYXRlZFN1cnZleS5XZWIuTW9kZWxzOwp1c2luZyBUd2lsaW8uVHdpTUw7CgpuYW1lc3BhY2UgQXV0b21hdGVkU3VydmV5LldlYi5Eb21haW4KewogICAgcHVibGljIGNsYXNzIFJlc3BvbnNlCiAgICB7CiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBRdWVzdGlvbiBfcXVlc3Rpb247CgogICAgICAgIHB1YmxpYyBSZXNwb25zZShRdWVzdGlvbiBxdWVzdGlvbikKICAgICAgICB7CiAgICAgICAgICAgIF9xdWVzdGlvbiA9IHF1ZXN0aW9uOwogICAgICAgIH0KCiAgICAgICAgcHVibGljIHN0YXRpYyBJRGljdGlvbmFyeTxRdWVzdGlvblR5cGUsIHN0cmluZz4gUXVlc3Rpb25UeXBlVG9NZXNzYWdlCiAgICAgICAgewogICAgICAgICAgICBnZXQKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEaWN0aW9uYXJ5PFF1ZXN0aW9uVHlwZSwgc3RyaW5nPgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHtRdWVzdGlvblR5cGUuVm9pY2UsICJQbGVhc2UgcmVjb3JkIHlvdXIgYW5zd2VyIGFmdGVyIHRoZSBiZWVwIGFuZCB0aGVuIGhpdCB0aGUgcG91bmQgc2lnbiJ9LAogICAgICAgICAgICAgICAgICAgIHtRdWVzdGlvblR5cGUuTnVtZXJpYywgIlBsZWFzZSBwcmVzcyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDkgYW5kIHRoZW4gaGl0IHRoZSBwb3VuZCBzaWduIn0sCiAgICAgICAgICAgICAgICAgICAge1F1ZXN0aW9uVHlwZS5ZZXNObywgIlBsZWFzZSBwcmVzcyB0aGUgMSBmb3IgeWVzIGFuZCB0aGUgMCBmb3Igbm8gYW5kIHRoZW4gaGl0IHRoZSBwb3VuZCBzaWduIn0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vLyA8c3VtbWFyeT4KICAgICAgICAvLy8gQnVpbGRzIGFuIGluc3RhbmNlLgogICAgICAgIC8vLyA8L3N1bW1hcnk+CiAgICAgICAgLy8vIDxyZXR1cm5zPkEgbmV3IGluc3RhbmNlIG9mIHRoZSBUd2lsaW9SZXNwb25zZTwvcmV0dXJucz4KICAgICAgICBwdWJsaWMgVHdpbGlvUmVzcG9uc2UgQnVpbGQoKQogICAgICAgIHsKICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gbmV3IFR3aWxpb1Jlc3BvbnNlKCk7CiAgICAgICAgICAgIHJlc3BvbnNlLlNheShfcXVlc3Rpb24uQm9keSk7CiAgICAgICAgICAgIHJlc3BvbnNlLlNheShRdWVzdGlvblR5cGVUb01lc3NhZ2VbX3F1ZXN0aW9uLlR5cGVdKTsKICAgICAgICAgICAgQWRkUmVjb3JkT3JHYXRoZXJDb21tYW5kcyhyZXNwb25zZSk7CgogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIHZvaWQgQWRkUmVjb3JkT3JHYXRoZXJDb21tYW5kcyhUd2lsaW9SZXNwb25zZSByZXNwb25zZSkKICAgICAgICB7CiAgICAgICAgICAgIHZhciBxdWVzdGlvblR5cGUgPSBfcXVlc3Rpb24uVHlwZTsKICAgICAgICAgICAgc3dpdGNoIChxdWVzdGlvblR5cGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNhc2UgUXVlc3Rpb25UeXBlLlZvaWNlOgogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLlJlY29yZChuZXcgeyBhY3Rpb24gPSBHZW5lcmF0ZVVybChfcXVlc3Rpb24pIH0pOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBRdWVzdGlvblR5cGUuTnVtZXJpYzoKICAgICAgICAgICAgICAgIGNhc2UgUXVlc3Rpb25UeXBlLlllc05vOgogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLkdhdGhlcihuZXcgeyBhY3Rpb24gPSBHZW5lcmF0ZVVybChfcXVlc3Rpb24pIH0pOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIHN0YXRpYyBzdHJpbmcgR2VuZXJhdGVVcmwoUXVlc3Rpb24gcXVlc3Rpb24pCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdCgiL2Fuc3dlcnMvY3JlYXRlP3F1ZXN0aW9uSWQ9ezB9IiwgcXVlc3Rpb24uSWQpOwogICAgICAgIH0KICAgIH0KfQ==</textarea>
<textarea class="saurus-file" data-file="AutomatedSurvey.Web/Controllers/AnswersController.cs" data-mode="csharp">77u/dXNpbmcgU3lzdGVtLldlYi5NdmM7CnVzaW5nIEF1dG9tYXRlZFN1cnZleS5XZWIuRG9tYWluOwp1c2luZyBBdXRvbWF0ZWRTdXJ2ZXkuV2ViLk1vZGVsczsKdXNpbmcgQXV0b21hdGVkU3VydmV5LldlYi5Nb2RlbHMuUmVwb3NpdG9yeTsKdXNpbmcgVHdpbGlvLlR3aU1MOwp1c2luZyBUd2lsaW8uVHdpTUwuTXZjOwoKbmFtZXNwYWNlIEF1dG9tYXRlZFN1cnZleS5XZWIuQ29udHJvbGxlcnMKewogICAgcHVibGljIGNsYXNzIEFuc3dlcnNDb250cm9sbGVyIDogVHdpbGlvQ29udHJvbGxlcgogICAgewogICAgICAgIHByaXZhdGUgcmVhZG9ubHkgSVJlcG9zaXRvcnk8UXVlc3Rpb24+IF9xdWVzdGlvbnNSZXBvc2l0b3J5OwogICAgICAgIHByaXZhdGUgcmVhZG9ubHkgSVJlcG9zaXRvcnk8QW5zd2VyPiBfYW5zd2Vyc1JlcG9zaXRvcnk7CgogICAgICAgIHB1YmxpYyBBbnN3ZXJzQ29udHJvbGxlcigpCiAgICAgICAgICAgIDogdGhpcygKICAgICAgICAgICAgICAgIG5ldyBRdWVzdGlvbnNSZXBvc2l0b3J5KCksCiAgICAgICAgICAgICAgICBuZXcgQW5zd2Vyc1JlcG9zaXRvcnkoKSkgeyB9CgogICAgICAgIHB1YmxpYyBBbnN3ZXJzQ29udHJvbGxlcigKICAgICAgICAgICAgSVJlcG9zaXRvcnk8UXVlc3Rpb24+IHF1ZXN0aW9uc1JlcG9zaXRvcnksCiAgICAgICAgICAgIElSZXBvc2l0b3J5PEFuc3dlcj4gYW5zd2Vyc1JlcG9zaXRvcnkKICAgICAgICAgICAgKQogICAgICAgIHsKICAgICAgICAgICAgX3F1ZXN0aW9uc1JlcG9zaXRvcnkgPSBxdWVzdGlvbnNSZXBvc2l0b3J5OwogICAgICAgICAgICBfYW5zd2Vyc1JlcG9zaXRvcnkgPSBhbnN3ZXJzUmVwb3NpdG9yeTsKICAgICAgICB9CgogICAgICAgIFtIdHRwUG9zdF0KICAgICAgICBwdWJsaWMgVHdpTUxSZXN1bHQgQ3JlYXRlKAogICAgICAgICAgICBbQmluZChJbmNsdWRlID0gIlF1ZXN0aW9uSWQsUmVjb3JkaW5nVXJsLERpZ2l0cyxDYWxsU2lkLEZyb20iKV0KICAgICAgICAgICAgQW5zd2VyIGFuc3dlcikKICAgICAgICB7CiAgICAgICAgICAgIF9hbnN3ZXJzUmVwb3NpdG9yeS5DcmVhdGUoYW5zd2VyKTsKCiAgICAgICAgICAgIHZhciBuZXh0UXVlc3Rpb24gPSBuZXcgUXVlc3Rpb25GaW5kZXIoX3F1ZXN0aW9uc1JlcG9zaXRvcnkpLkZpbmROZXh0KGFuc3dlci5RdWVzdGlvbklkKTsKICAgICAgICAgICAgcmV0dXJuIFR3aU1MKG5leHRRdWVzdGlvbiAhPSBudWxsID8gbmV3IFJlc3BvbnNlKG5leHRRdWVzdGlvbikuQnVpbGQoKSA6IEV4aXRSZXNwb25zZSk7CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIHN0YXRpYyBUd2lsaW9SZXNwb25zZSBFeGl0UmVzcG9uc2UKICAgICAgICB7CiAgICAgICAgICAgIGdldAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBuZXcgVHdpbGlvUmVzcG9uc2UoKTsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLlNheSgiVGhhbmtzIGZvciB5b3VyIHRpbWUuIEdvb2QgYnllIik7CiAgICAgICAgICAgICAgICByZXNwb25zZS5IYW5ndXAoKTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/automated-survey-csharp" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>